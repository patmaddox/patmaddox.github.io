---
layout: post
title: ";edit Considered Harmless Revisited"
date: 2007-08-07 01:11:57.000000000 -06:00
categories: []
tags: []
status: publish
type: post
published: true
meta:
  _edit_last: '2'
  _wp_rp_related_posts_query_result_cache_expiration: '1442053496'
  _wp_rp_related_posts_query_result_cache_4: a:8:{i:0;O:8:"stdClass":2:{s:7:"post_id";s:2:"86";s:5:"score";s:18:"25.625457480714598";}i:1;O:8:"stdClass":2:{s:7:"post_id";s:2:"48";s:5:"score";s:17:"20.64180329550462";}i:2;O:8:"stdClass":2:{s:7:"post_id";s:3:"216";s:5:"score";s:18:"14.790877140103543";}i:3;O:8:"stdClass":2:{s:7:"post_id";s:2:"78";s:5:"score";s:18:"12.074630171783362";}i:4;O:8:"stdClass":2:{s:7:"post_id";s:2:"55";s:5:"score";s:18:"12.074630171783362";}i:5;O:8:"stdClass":2:{s:7:"post_id";s:2:"53";s:5:"score";s:18:"12.074630171783362";}i:6;O:8:"stdClass":2:{s:7:"post_id";s:3:"940";s:5:"score";s:18:"11.463866872612034";}i:7;O:8:"stdClass":2:{s:7:"post_id";s:3:"889";s:5:"score";s:18:"11.463866872612034";}}
author:
  login: pat
  email: patmaddox@me.com
  display_name: pat
  first_name: Pat
  last_name: Maddox
excerpt: !ruby/object:Hpricot::Doc
  options: {}
---
<p>I&#8217;m currently reading <a href="http://safari.oreilly.com/9780596529260">RESTful Web Services</a>, and I thought back to when I said <a href="http://www.patmaddox.com/blog/2007/4/11/edit-considered-harmless">;edit is considered harmless</a>.  There were several ideas floating around at the time that I now feel were only partially understood.</p>
<p><a href="http://blog.roberthahn.ca/articles/2007/04/06/url-design">Robert Hahn&#8217;s second rule of URI design</a> says</p>
<blockquote>
<p>When creating alternate views of the same data, consider using compound nouns or an adjective-noun pair, depending on the problem space you&#8217;re working in. Whichever style you choose, stick with it for the entire site.</p>
</blockquote>
<p>This led to URIs like /article/form/1 instead of /article/1;edit.</p>
<p>I think he arrived at the right solution, or at least close to it, but the reasoning is probably innacurate.  Actually it&#8217;s more likely that I misunderstood what he was saying, because I used similar reasoning to arrive at the wrong solution!</p>
<h2>Alternate view of the same data?</h2>
<p>/article/form/1 is a better URI because it&#8217;s not actually a different representation of the same resource, but rather it&#8217;s a separate resource altogether.  It&#8217;s the editable form corresponding to /article/1.  This is easy to mistake because both resources are backed by the same data.</p>
<p>The main reason<sup><a href="#lame-reason">1</a></sup> I don&#8217;t like tacking ;edit onto the end of a URI is because it suggests that the URI actually exists, aka you won&#8217;t get a 404.  When you go to http://www.google.com/search you get a valid response.  You assume then that when you add some search parameters to it you will again get a valid response.  With a URI like http://www.google.com/search?q=chickenamazinghollaatyerboy you&#8217;ll get a 200 response, even if it contains no results.</p>
<p>/article/1;edit doesn&#8217;t denote a search query on the article, but it does give the impression that you won&#8217;t get a 404 if you get a valid response for the parent, /article/1.  Of course it&#8217;s entirely possible that a Rails controller won&#8217;t implement the edit action, so the ;edit request will result in a 404.</p>
<p>I prefer /article/1/form to /article/form/1 because it denotes a hierarchical relationship - the form is a child of the parent article.  /article/1/form is a standard URI<sup><a href="#standard-uri">2</a></sup> and it wouldn&#8217;t be surprising at all to receive a 404.  I think this may be a subproperty of resources&#8217; addressability.  When you request a resource you may anticipate any of the standard HTTP responses.  URIs that may result in unexpected responses are poorly designed.</p>
<p>To that end, I think anything like /article/form/1, /article/1/form, and even /article/1.edit are all better than ;edit.  However the final point of all this is understanding that the form isn&#8217;t a particular representation of a resource, but in fact a resource all its own.  A simple example should illustrate this.</p>
<p>You may request /article/1/form and get the following HTML snippet:</p>
<table class="CodeRay">
<tr>
<td class="line_numbers" title="click to toggle" onclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }">
<pre>1<tt>
</tt>2<tt>
</tt>3<tt>
</tt>4<tt>
</tt><strong>5</strong><tt>
</tt></pre>
</td>
<td class="code">
<pre ondblclick="with (this.style) { overflow = (overflow == 'auto' || overflow == '') ? 'visible' : 'auto' }">  <span class="ta">&lt;form</span> <span class="an">action</span>=<span class="s"><span class="dl">"</span><span class="k">/articles/1</span><span class="dl">"</span></span> <span class="an">method</span>=<span class="s"><span class="dl">"</span><span class="k">post</span><span class="dl">"</span></span><span class="ta">&gt;</span><tt>
</tt>    Title: <span class="ta">&lt;input</span> <span class="an">type</span>=<span class="s"><span class="dl">"</span><span class="k">text</span><span class="dl">"</span></span> <span class="an">name</span>=<span class="s"><span class="dl">"</span><span class="k">subject</span><span class="dl">"</span></span><span class="ta">/&gt;</span><tt>
</tt>    Body: <span class="ta">&lt;input</span> <span class="an">type</span>=<span class="s"><span class="dl">"</span><span class="k">textarea</span><span class="dl">"</span></span> <span class="an">name</span>=<span class="s"><span class="dl">"</span><span class="k">body</span><span class="dl">"</span></span><span class="ta">/&gt;</span><tt>
</tt>    <span class="ta">&lt;input</span> <span class="an">type</span>=<span class="s"><span class="dl">"</span><span class="k">hidden</span><span class="dl">"</span></span> <span class="an">name</span>=<span class="s"><span class="dl">"</span><span class="k">_method</span><span class="dl">"</span></span> <span class="an">value</span>=<span class="s"><span class="dl">"</span><span class="k">put</span><span class="dl">"</span></span><span class="ta">/&gt;</span><tt>
</tt>  <span class="ta">&lt;/form&gt;</span></pre>
</td>
</tr>
</table>
<p>At some point you decide you want people to be able to add an excerpt to the article.  Furthermore, you only want the edit box to appear for that particular article.  It&#8217;s as simple as making a PUT to /article/1/form with the following body:</p>
<table class="CodeRay">
<tr>
<td class="line_numbers" title="click to toggle" onclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }">
<pre>1<tt>
</tt>2<tt>
</tt>3<tt>
</tt>4<tt>
</tt><strong>5</strong><tt>
</tt>6<tt>
</tt></pre>
</td>
<td class="code">
<pre ondblclick="with (this.style) { overflow = (overflow == 'auto' || overflow == '') ? 'visible' : 'auto' }">  <span class="ta">&lt;form</span> <span class="an">action</span>=<span class="s"><span class="dl">"</span><span class="k">/articles/1</span><span class="dl">"</span></span> <span class="an">method</span>=<span class="s"><span class="dl">"</span><span class="k">post</span><span class="dl">"</span></span><span class="ta">&gt;</span><tt>
</tt>    Title: <span class="ta">&lt;input</span> <span class="an">type</span>=<span class="s"><span class="dl">"</span><span class="k">text</span><span class="dl">"</span></span> <span class="an">name</span>=<span class="s"><span class="dl">"</span><span class="k">subject</span><span class="dl">"</span></span><span class="ta">/&gt;</span><tt>
</tt>    Excerpt: <span class="ta">&lt;input</span> <span class="an">type</span>=<span class="s"><span class="dl">"</span><span class="k">text</span><span class="dl">"</span></span> <span class="an">name</span>=<span class="s"><span class="dl">"</span><span class="k">excerpt</span><span class="dl">"</span></span><span class="ta">/&gt;</span><tt>
</tt>    Body: <span class="ta">&lt;input</span> <span class="an">type</span>=<span class="s"><span class="dl">"</span><span class="k">textarea</span><span class="dl">"</span></span> <span class="an">name</span>=<span class="s"><span class="dl">"</span><span class="k">body</span><span class="dl">"</span></span><span class="ta">/&gt;</span><tt>
</tt>    <span class="ta">&lt;input</span> <span class="an">type</span>=<span class="s"><span class="dl">"</span><span class="k">hidden</span><span class="dl">"</span></span> <span class="an">name</span>=<span class="s"><span class="dl">"</span><span class="k">_method</span><span class="dl">"</span></span> <span class="an">value</span>=<span class="s"><span class="dl">"</span><span class="k">put</span><span class="dl">"</span></span><span class="ta">/&gt;</span><tt>
</tt>  <span class="ta">&lt;/form&gt;</span></pre>
</td>
</tr>
</table>
<p>It may be a bit contrived, but it&#8217;s certainly not unreasonable.  HTML forms are resources like any other.  We just don&#8217;t often see it that way because the only likely client is the web browser.  You won&#8217;t be examining the Accepts header because you know that you&#8217;ll always want the HTML representation.</p>
<h2>Two points to consider when designing URIs</h2>
<p>I think I&#8217;ve got a firm grasp on the resource-oriented architecture, but there are still things that give me headaches.  I&#8217;ve come up with two subtle points that I hope will leave you with a better understanding of ROA.</p>
<ol>
<li>Two URIs backed by the same data are not necessarily the same resource</li>
<li>All HTTP response codes are fair game for any URI request.  No response should be unexpected or &#8220;impossible&#8221;</li>
</ol>
<hr />
<p><a name="lame-reason">1</a>. Some people have said it breaks caching.  That&#8217;s a bad argument because it&#8217;s a problem with Rails&#8217; implementation<br /><a name="standard-uri">2</a>. As opposed to /article/1;edit, which is legal, but weird</p>
