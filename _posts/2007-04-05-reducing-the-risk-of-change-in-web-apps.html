---
layout: post
title: Reducing the Risk of Change in Web Apps
date: 2007-04-05 00:22:51.000000000 -06:00
categories: []
tags: []
status: publish
type: post
published: true
meta:
  _edit_last: '2'
  _wp_rp_related_posts_query_result_cache_expiration: '1441490347'
  _wp_rp_related_posts_query_result_cache_4: a:8:{i:0;O:8:"stdClass":2:{s:7:"post_id";s:2:"99";s:5:"score";s:18:"16.966624111676943";}i:1;O:8:"stdClass":2:{s:7:"post_id";s:2:"44";s:5:"score";s:18:"16.966624111676943";}i:2;O:8:"stdClass":2:{s:7:"post_id";s:4:"1066";s:5:"score";s:17:"15.76536801178127";}i:3;O:8:"stdClass":2:{s:7:"post_id";s:3:"252";s:5:"score";s:18:"15.490046439517169";}i:4;O:8:"stdClass":2:{s:7:"post_id";s:3:"900";s:5:"score";s:18:"14.389535749068896";}i:5;O:8:"stdClass":2:{s:7:"post_id";s:4:"1020";s:5:"score";s:18:"14.370814863618737";}i:6;O:8:"stdClass":2:{s:7:"post_id";s:3:"197";s:5:"score";s:18:"13.783066778081398";}i:7;O:8:"stdClass":2:{s:7:"post_id";s:3:"220";s:5:"score";s:18:"13.404582778859513";}}
author:
  login: pat
  email: patmaddox@me.com
  display_name: pat
  first_name: Pat
  last_name: Maddox
excerpt: !ruby/object:Hpricot::Doc
  options: {}
---
<p>I just read an interesting post titled <a href="http://loglibrarian.blogspot.com/2007/03/is-refactoring-worth-it-for-startups.html">Is Refactoring Worth it for Startups?</a>  The basic premise is that <a href="http://www.amazon.com/Refactoring-Improving-Design-Existing-Code/dp/0201485672/ref=pd_bbs_sr_1/102-6008414-9638531?ie=UTF8&amp;s=books&amp;qid=1175717465&amp;sr=1-1">refactoring</a> - the art of improving your code&#8217;s design - might be very costly if your code isn&#8217;t worth improving in the first place.  I&#8217;ve oversimplified it, but hopefully you can understand the idea.  There&#8217;s no sense wasting time improving something that has zero dollar value.</p>
<p>Over the past couple years I&#8217;ve grown to be very fond of refactoring.  That post though made me think hard about how much refactoring I currently do at my job.  I can honestly say it&#8217;s not that much.</p>
<p>When I <a href="http://www.pregopoker.com/">built, launched, maintained and sold my website</a> from scratch, I did a lot of refactoring in the process.  That&#8217;s mostly because from the very beginning it was just a fun project.  I enjoyed spending some extra time pushing the design around, trying various things.  It was a good learning experience.</p>
<p>Working at a startup is a different experience as you might imagine.  We need to get features done, and we need them quickly.  The top dawg always says &#8220;make it work, then make it clean&#8230;if there&#8217;s time.&#8221;  Very rarely is there time - like a lot of startups, we&#8217;ve got plenty of development work to keep us busy for the next several months.</p>
<p>I think that when it comes to refactoring, startups have three choices:</p>
<ol>
<li>Do very little or none and have their code fall into disrepair</li>
<li>Refactor mercilessly and spend lots of precious time on potentially worthless code</li>
<li>Use techniques and tools that minimize the need to refactor</li>
</ol>
<p>(3) is where Rails comes into play.  In my experience, infrastructure code tends to be a lot messier than domain code.  We can spend a lot of time <a href="http://www.amazon.com/Domain-Driven-Design-Tackling-Complexity-Software/dp/0321125215">modeling the domain</a>, both through dialog and coding.  While it&#8217;s still abstract thought-work, we hold a concept in our mind which just &#8220;makes sense.&#8221;  Infrastructure is different in that you usually have to think about what it <i>does</i> rather than what it <i>is</i>.  I&#8217;m certain others disagree, but for me, analyzing an abstract concept is much easier than the abstraction of a fleeting action.  All this boils down to me being more likely to get my domain code right, or closer to right, fairly early on.  I spend much more time refactoring infrastructure code than I do domain code.</p>
<p>If this is the case, then it&#8217;s obvious how Rails mitigates the need to refactor.  By taking care of nearly all of the infrastructure, Rails lets me spend most of my time writing domain code - the code that I understand better throughout the process, thus have less need to refactor.  Not only that, but when I do have to refactor, it&#8217;s a lot more likely to be on code that genuinely has business value.</p>
<p>Using Rails is a giant step towards writing leaner, more maintainable apps.  There&#8217;s another thing you can do to reduce the time you spend refactoring.</p>
<p>Consider the meaning of refactoring once more:</p>
<p><quote>&#8220;Improving the design of existing code&#8221;</quote></p>
<p>Do we have any special design-related tools at our disposal?  We&#8217;re talking about Rails and the web here&#8230;</p>
<p>I&#8217;m talking, of course, about REST.  REST is an architecture, a design decision you apply to your app as a whole.  If you make a commitment to this simple, powerful, flexible design from the getgo, then it leaves you less room to make design mistakes.</p>
<p>Less room for design mistakes means less time spent cleaning up after yourself.</p>
<p>A while back <a href="http://www.patmaddox.com/blog/2006/12/31/why-people-don-t-value-rest">I asked myself how you quantify the benefits of REST</a>, and couldn&#8217;t come up with anything.  I&#8217;ve just known that it feels right and that my code is easier to write and maintain.  Now though it&#8217;s pretty simple to quantify the benefits.  Using REST, you can spend more time adding features and less time reworking code which may turn out to be worthless.</p>
<p>Now all of this may seem that I think refactoring is a costly task.  Nothing could be further from the truth.  All I&#8217;m asking is what if we <i>could</i> make it a costly task?  If you could come up with the perfect design after 5 minutes at the whiteboard, surely you wouldn&#8217;t waste time refactoring your code.  Why not look for ways to reduce refactoring time in the first place?</p>
<p>It really all comes down to decisions.  Every decision we make is another opportunity to make a mistake and cost time, money and effort.  Some of the decisions have enough potential upside that it&#8217;s worth the calculated risk.  Using Rails we can eliminate a lot of low-business value decisions that are still rampant in PHP and Java land - what directory structure to use, how to name things, how to structure controllers and actions, ORM configuration, etc.  We get rid of the decisions that add little or no business value, and write the code that adds the most value.  Exactly as software development should be.</p>
<p>REST takes it a step further by making design decisions for us as well.  This works because we&#8217;re limited by the constraints of the web.  Even a very complex web application is far simpler than other apps and software systems.  We can get away with committing ourselves to such an easily-overlooked design principle.  I think the web is the perfect development platform for this very reason.  Simple constraints give us less to worry about, so we can spend most of our time creating business value.</p>
<p>Ultimately I don&#8217;t spend a lot of time refactoring because I simply don&#8217;t need to.  My team&#8217;s design isn&#8217;t perfect, but by starting simple and keeping it simple, we keep it really easy to maintain.  The power of Rails, the elegance of Ruby, and the simplicity of REST combine to make most changes take only minutes (I&#8217;m known for getting moody if I spend two hours on a single task).  Because of the tools and techniques we use, we&#8217;re able to quickly add lots of functionality while at the same time reducing the risk of change.</p>
